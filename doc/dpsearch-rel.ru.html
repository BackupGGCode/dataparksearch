<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<HTML
><HEAD
><TITLE
>Релевантность

</TITLE
><META
NAME="GENERATOR"
CONTENT="Modular DocBook HTML Stylesheet Version 1.79"><LINK
REL="HOME"
TITLE="DataparkSearch Engine 4.52"
HREF="index.ru.html"><LINK
REL="UP"
TITLE="Поиск документов"
HREF="dpsearch-doingsearch.ru.html"><LINK
REL="PREVIOUS"
TITLE="Дизайн search.html"
HREF="dpsearch-html.ru.html"><LINK
REL="NEXT"
TITLE="Регистрация поисковых запросов

 "
HREF="dpsearch-track.ru.html"><LINK
REL="STYLESHEET"
TYPE="text/css"
HREF="datapark.css"><META
NAME="Description"
CONTENT="DataparkSearch - Полнофункциональная поисковая машина для Интернета и Интранета с открытым исходным кодом. Распространяется по лицензии GNU."><META
NAME="Keywords"
CONTENT="shareware, freeware, интернет, unix, поисковик, поисковая машина, поиск, поиск информации, интранет, open source, opensource, search, searching, software, udmsearch, engine, indexing, system, web, ftp, http, cgi, php, SQL, MySQL, database, php3, FreeBSD, Linux, Unix, DataparkSearch, MacOS X, Mac OS X, Windows, 2000, NT, 95, 98, GNU, GPL, url, grabbing"></HEAD
><BODY
CLASS="sect1"
BGCOLOR="#FFFFFF"
TEXT="#000000"
LINK="#0000C4"
VLINK="#1200B2"
ALINK="#C40000"
><!--#include virtual="body-before.html"--><DIV
CLASS="NAVHEADER"
><TABLE
SUMMARY="Header navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TH
COLSPAN="3"
ALIGN="center"
>DataparkSearch Engine 4.52: Справочное руководство</TH
></TR
><TR
><TD
WIDTH="10%"
ALIGN="left"
VALIGN="bottom"
><A
HREF="dpsearch-html.ru.html"
ACCESSKEY="P"
>&#1055;&#1088;&#1077;&#1076;.</A
></TD
><TD
WIDTH="80%"
ALIGN="center"
VALIGN="bottom"
>&#1043;&#1083;&#1072;&#1074;&#1072; 8. Поиск документов</TD
><TD
WIDTH="10%"
ALIGN="right"
VALIGN="bottom"
><A
HREF="dpsearch-track.ru.html"
ACCESSKEY="N"
>&#1057;&#1083;&#1077;&#1076;.</A
></TD
></TR
></TABLE
><HR
ALIGN="LEFT"
WIDTH="100%"></DIV
><DIV
CLASS="sect1"
><H1
CLASS="sect1"
><A
NAME="rel"
>8.5. Релевантность
<A
NAME="AEN5259"
></A
></A
></H1
>
	
	<DIV
CLASS="sect2"
><H2
CLASS="sect2"
><A
NAME="rel-order"
>8.5.1. Упорядочивание документов</A
></H2
>
		
<P
>При сортировке документов перед выдачей результата поиска <SPAN
CLASS="application"
>DataparkSearch</SPAN
>
по умолчанию учитывает два параметра каждого документа: <TT
CLASS="literal"
>релевантность</TT
> и <TT
CLASS="literal"
>популярность</TT
>.
Сначала документы сортируются по релевантности, а при равенстве, по популярности.
</P
>
	</DIV
>

<DIV
CLASS="sect2"
><H2
CLASS="sect2"
><A
NAME="relevancy"
>8.5.2. Расчёт релевантности</A
></H2
>
<P
>Релевантность каждого документа вычисляется как косинус угла между вектором весов этого документа и вектором весов,
соответствующему поисковому запросу, умноженный на 100%.
Число координат векторов весов равно произведению числа слов в запросе
(с учётом всех словоформ и синонимов) на число секций, определённых в
<TT
CLASS="filename"
>indexer.conf</TT
>. Каждая координата вектора весов соответсвует слову из запроса в той или иной секции
документа. И значение для этой координаты вычисляется на основе весов секций, заданных параметром <CODE
CLASS="option"
>wf</CODE
>
(см. ) и на основании
того, является ли данное слово именно указанным в запросе или его словоформой. Также еще одна координата соответсвует
среднему расстоянию между найденными словами в данном документе. Для вектора запроса эта координата полагается равной 0.
</P
>
<P
>  Т.к. в файлах конфигурации поисковых фронтэндов
(<TT
CLASS="filename"
>searchd.conf</TT
> или <TT
CLASS="filename"
>search.htm</TT
>) не предусмотрено указание секцией,
используйте <A
NAME="AEN5276"
></A
> команду
<B
CLASS="command"
>NumSections</B
> для указания числа используемых секций (по умолчанию оно равно 256).
Впрочем, точное число секций не играет решающей роли в порядке сортировки документов, только
в значении рейтинга релевантности.
</P
>

<DIV
CLASS="table"
><A
NAME="AEN5280"
></A
><P
><B
>&#1058;&#1072;&#1073;&#1083;&#1080;&#1094;&#1072; 8-3. Параметры расчёта релевантности, задаваемые при компиляции (ключи для <B
CLASS="command"
>configure</B
>)</B
></P
>
	<TABLE
BORDER="1"
CLASS="CALSTABLE"
><COL><COL><TBODY
><TR
><TD
><CODE
CLASS="option"
>--enable-fullrel</CODE
></TD
><TD
><P
>Включает полный вариант расчёта релевантности. Значение по умолчанию: выключено (или быстрый расчёт релевантности).
</P
></TD
></TR
><TR
><TD
><CODE
CLASS="option"
>--disable-reldistance</CODE
></TD
><TD
><P
>Выключает учёт среднего растояния между словами при расчёте релевантности. Значение по умолчанию: включено.
</P
></TD
></TR
><TR
><TD
><CODE
CLASS="option"
>--disable-relposition</CODE
></TD
><TD
><P
>Выключает учёт позиции первого слова из запроса в тексте документа при расчёте релевантности. Значение по умолчанию: включено.
</P
></TD
></TR
><TR
><TD
><CODE
CLASS="option"
>--disable-relwrdcount</CODE
></TD
><TD
><P
>Выключает учёт чисел вхождения слов из запроса в найденом документе при расчёте релевантности. Значение по умолчанию: включено.
</P
></TD
></TR
><TR
><TD
><CODE
CLASS="option"
>--with-bestpos=<CODE
CLASS="option"
>NUM</CODE
></CODE
></TD
><TD
><P
>Задаёт <CODE
CLASS="option"
>NUM</CODE
> в качестве лучшего значения первой позиции слова запроса в найденом документе. 
Значение по умолчанию: 4.
</P
></TD
></TR
><TR
><TD
><CODE
CLASS="option"
>--with-bestwrdcnt=<CODE
CLASS="option"
>NUM</CODE
></CODE
></TD
><TD
><P
>Задаёт <CODE
CLASS="option"
>NUM</CODE
> в качестве лучшего числа каждого из слов запроса в найденом документе. 
Значение по умолчанию: 11.
</P
></TD
></TR
><TR
><TD
><CODE
CLASS="option"
>--with-distfactor=<CODE
CLASS="option"
>NUM</CODE
></CODE
></TD
><TD
><P
>Задаёт <CODE
CLASS="option"
>NUM</CODE
> в качестве коэффициента для среднего растояния между словами запроса в найденом документе. 
Значение по умолчанию: 0.2.
</P
></TD
></TR
><TR
><TD
><CODE
CLASS="option"
>--with-posfactor=<CODE
CLASS="option"
>NUM</CODE
></CODE
></TD
><TD
><P
>Задаёт <CODE
CLASS="option"
>NUM</CODE
> в качестве коэффициента для расстояния между первой позицией слова запроса в найденом документе и значением, указаным параметром <CODE
CLASS="option"
>--with-bestpos</CODE
>. 
Значение по умолчанию: 0.5.
</P
></TD
></TR
><TR
><TD
><CODE
CLASS="option"
>--with-wrdcntfactor=<CODE
CLASS="option"
>NUM</CODE
></CODE
></TD
><TD
><P
>Задаёт <CODE
CLASS="option"
>NUM</CODE
> в качестве коэффициента для расстояния между числом слова запроса в найденом документе и значением, указаным параметром <CODE
CLASS="option"
>--with-bestwrdcnt</CODE
>. 
Значение по умолчанию: 0.4.
</P
></TD
></TR
><TR
><TD
><CODE
CLASS="option"
>--with-wrdunifactor=<CODE
CLASS="option"
>NUM</CODE
></CODE
></TD
><TD
><P
>Задаёт <CODE
CLASS="option"
>NUM</CODE
> в качестве коэффициента для величины отклонения количеств вхождения слов запроса в найденый документ от равномерного распределения. 
Значение по умолчанию: 1.5.
</P
></TD
></TR
></TBODY
></TABLE
>
</DIV
>

</DIV
>



<DIV
CLASS="sect2"
><H2
CLASS="sect2"
><A
NAME="poprank"
>8.5.3. Рейтинг популярности<A
NAME="AEN5351"
></A
></A
></H2
>

<P
><A
NAME="AEN5354"
></A
>
<SPAN
CLASS="application"
>DataparkSearch</SPAN
> поддерживает два метода расчёта рейтинга популярности.
Метод, использовавшийся в предыдущих версиях получил название <TT
CLASS="literal"
>Goo</TT
>, а новый метод называется 
<TT
CLASS="literal"
>Neo</TT
>. По умолчанию используется метод <TT
CLASS="literal"
>Goo</TT
>. Чтобы выбрать нужный метод расчёта популярности
используйте команду <B
CLASS="command"
>PopRankMethod</B
>:
<PRE
CLASS="programlisting"
>&#13;PopRankMethod Neo
</PRE
>
</P
>

<P
><A
NAME="AEN5364"
></A
>
Для метода расчёта популярности <TT
CLASS="literal"
>Neo</TT
>,а также для полного варианта метода <TT
CLASS="literal"
>Goo</TT
> вам
необходимо включить сбор ссылок между страницами командой <B
CLASS="command"
>CollectLinks yes</B
> в вашем файле конфигурации
<TT
CLASS="filename"
>indexer.conf</TT
>. Однако, это незначительно уменьшает скорость индексирования, поэтому по умолчанию
сбор этих ссылок выключен. 
</P
>

<P
>По умолчанию, для расчета рейтинга популярности используются только ссылки между различными сайтами.
 Если в <TT
CLASS="filename"
>indexer.conf</TT
> указана опция 
<CODE
CLASS="option"
><A
NAME="AEN5374"
></A
>PopRankSkipSameSite no</CODE
>,
 то при расчёте рейтинга популярности учитываются все ссылки.
</P
>

<P
>Вы можете присвоить начальное значение рейтинга популярности страницы используя МЕТА таг DP.PopRank 
(см. ).
</P
>


<DIV
CLASS="sect3"
><H3
CLASS="sect3"
><A
NAME="Goo-poprank"
>8.5.3.1. Метод расчёта популярности Goo</A
></H3
>

<P
>Рейтинг популярности рассчитывается в два этапа. На первом этапе значение параметра <CODE
CLASS="option"
>Weight</CODE
>
для каждого сервера делится на число ссылок со страниц этого сервера. Таким образом определяется вес одной ссылки с этого сервера.
На втором этапе для каждой страницы находится ссума весов всех ссылок, указывающих на эту страницу.
Эта сумма и является индексом популярности страницы.
</P
>

<P
><A
NAME="AEN5384"
></A
>
По умолчанию значение параметра <CODE
CLASS="option"
>Weight</CODE
> для каждого сервера равно 1. Изменить это значение вы можете непосредственно
в SQL-таблице <TT
CLASS="literal"
>server</TT
> или при помощи команды <B
CLASS="command"
>Weight</B
> в файле конфигурации
<TT
CLASS="filename"
>indexer.conf</TT
>.
</P
>

<P
>Если в <TT
CLASS="filename"
>indexer.conf</TT
> указана опция
<CODE
CLASS="option"
><A
NAME="AEN5394"
></A
>PopRankFeedBack yes</CODE
>,
то перед расчётом рейтинга популярности страниц рассчитывается рейтинг сайтов. Для этого для каждого сайта находится сумма
популярности всех его страниц, если она окажется меньше 1, то рейтинг сайта полагается равным 1, в противном случае он
полагается равным найденной сумме.
</P
>

<P
>Если в <TT
CLASS="filename"
>indexer.conf</TT
> указана опция
<CODE
CLASS="option"
><A
NAME="AEN5400"
></A
>PopRankUseTracking yes</CODE
>,
то перед расчётом рейтинга популярности страниц в качестве рейтинга сайтов будет использована сумма числа запросов уточнения поиска
для каждого сайта (т.е. число запросов поиска только среди документов с этого сайта).
</P
>

<P
>Если в <TT
CLASS="filename"
>search.htm</TT
> (или <TT
CLASS="filename"
>searchd.conf</TT
>) указана опция
<CODE
CLASS="option"
><A
NAME="AEN5407"
></A
>PopRankUseShowCnt yes</CODE
>,
то для каждого выводимого пользователю результата поиска, имеющего значение релевантности выше, заданного командой
<CODE
CLASS="option"
><A
NAME="AEN5411"
></A
>PopRankShowCntRatio</CODE
>
(по умолчанию используется значение 25.0), значение <TT
CLASS="literal"
>url.shows</TT
> увеличивается на 1.
Если в <TT
CLASS="filename"
>indexer.conf</TT
> указана опция <CODE
CLASS="option"
>PopRankUseShowCnt yes</CODE
>,
то при расчёте рейтинга популярности страниц, к полученному на предыдущих этапах значению рейтига каждой страницы будет прибавлено значение
<TT
CLASS="literal"
>url.shows</TT
>, умноженное на значение, заданное опцией
<CODE
CLASS="option"
><A
NAME="AEN5419"
></A
>PopRankShowCntWeight</CODE
>
(по умолчанию используется значение 0.01).
</P
>
</DIV
>

<DIV
CLASS="sect3"
><H3
CLASS="sect3"
><A
NAME="Neo-poprank"
>8.5.3.2. Метод расчёта популярности Neo</A
></H3
>
</DIV
>

<P
>При этом методе расчёта популярности подразумевается, что страницы являются нейронами, а ссылки между страницами
являются связями между нейронами. Такми образом для образованой нейросети можно использовать один методов её обучения -
метод обратного распространения ошибки. Рейтингом популярности страницы в данном случае считается уровень активности 
соответствующего нейрона. См. <A
HREF="http://www.maxime.net.ru/doc/Neo.pdf"
TARGET="_top"
>краткое описание метода расчёта популярности Neo</A
>.
</P
>

<P
>Вы можете использовать команду
<CODE
CLASS="option"
><A
NAME="AEN5428"
></A
>PopRankNeoIterations</CODE
>
для задания числа итераций при расчёте популярности методом  "Neo". Значение по умолчанию: 3.
</P
>

<P
><A
NAME="AEN5432"
></A
>
По умолчанию, расчёт рейтинга популярности методом "Neo" ведётся одновременно с индексирования. Для ускорения индексирования,
вы можете отложить расчёт рейтинга популярности методом "Neo" указав команду:
</P
>
<PRE
CLASS="programlisting"
>&#13;PopRankPostpone yes
</PRE
>
<P
>Затем вы можете расчитать рейтинг популярности методом "Neo" также как и для метода "Goo", т.е.:
<B
CLASS="command"
>indexer -TR</B
>
</P
>

</DIV
>


	<DIV
CLASS="sect2"
><H2
CLASS="sect2"
><A
NAME="rel-bool"
>8.5.4. Булевы запросы
<A
NAME="AEN5440"
></A
></A
></H2
>
		
		<P
>При булевом поиске, состоящем из двух и более слов, необходимо вводить операторы (&#38;, |, ~).
Т.е. необходимо вводить <KBD
CLASS="userinput"
>a &#38; book</KBD
> вместо <KBD
CLASS="userinput"
>a book</KBD
>.
См. также .
</P
>

	</DIV
>

	<DIV
CLASS="sect2"
><H2
CLASS="sect2"
><A
NAME="rel-cwords"
>8.5.5. Crosswords
<A
NAME="AEN5449"
></A
></A
></H2
>
		
		<P
>Эта возможность позволяет связать слова между
&#60;a href="xxx"&#62; и &#60;/a&#62; с документов, на который указывает данная ссылка.

Для включения этой возможности, используйте команду
<B
CLASS="command"
>CrossWords yes
<A
NAME="AEN5453"
></A
>
</B
> в <TT
CLASS="filename"
>indexer.conf</TT
> и <TT
CLASS="filename"
>search.htm</TT
>, а также определите секцию
<KBD
CLASS="userinput"
>crosswords</KBD
> в файле <TT
CLASS="filename"
>sections.conf</TT
>.
</P
>
	</DIV
>

<DIV
CLASS="sect2"
><H2
CLASS="sect2"
><A
NAME="sea"
>8.5.6. Алгоритм Построения Рефератов (SEA)</A
></H2
>

<A
NAME="AEN5462"
></A
>
<A
NAME="AEN5464"
></A
>
<A
NAME="AEN5467"
></A
>
<A
NAME="AEN5470"
></A
>
<P
><TT
CLASS="literal"
>Алгоритм Построения Рефератов (SEA)</TT
> позволяет построить реферат из трёх наиболее релевантных предложений для
каждого проиндексированого документа, состоящего из более 6 предложений. Чтобы включить эту возможность, добавьте эту команду в ваш файл
<TT
CLASS="filename"
>seaction.conf</TT
>:
<PRE
CLASS="programlisting"
>&#13;Section sea x y
</PRE
>
где <CODE
CLASS="option"
>x</CODE
> - номер секции и <CODE
CLASS="option"
>y</CODE
> - максимальный размер значения секции, задайте его равным 0, если вы не хотите
показывать эту секцию на тсраницах результатов поиска.
Если вы указываете ненулевое значение для <CODE
CLASS="option"
>y</CODE
>, вы можете использовать мета-переменную <TT
CLASS="literal"
>$(sea)</TT
> 
в вашем шаблоне поиска для отображения реферата в результатах поиска.
</P
>

<P
>Соответствующие команды конфигурирования:
</P
>
<P
><A
NAME="AEN5483"
></A
>
Команда <B
CLASS="command"
>SEASentenceMinLength</B
> задаёт минимальную длину предложения, которое будет использовано для создания реферата.
Значение по умолчанию: 32.
</P
>
<P
><A
NAME="AEN5488"
></A
>
Команда <B
CLASS="command"
>SEASentences</B
> используется для задания максимального числа предложений, используемых при построении реферата.
Значение по умолчанию: 64. В виду нелинейной сложности алгоритма SEA, вы можете установить значение этого параметра исходя из желаемой
производительности индексирования.
</P
>
<P
><A
NAME="AEN5493"
></A
>
При помощи команды <B
CLASS="command"
>SEASections</B
> вы можете указать список секций документов, по которым будут строиться рефераты.
По умолчанию, для построения рефератов используется только секция "body".
<PRE
CLASS="programlisting"
>&#13;SEASections "body, title"
</PRE
>
</P
>

</DIV
>


	
</DIV
><DIV
CLASS="NAVFOOTER"
><HR
ALIGN="LEFT"
WIDTH="100%"><TABLE
SUMMARY="Footer navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
><A
HREF="dpsearch-html.ru.html"
ACCESSKEY="P"
>&#1055;&#1088;&#1077;&#1076;.</A
></TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="index.ru.html"
ACCESSKEY="H"
>&#1053;&#1072;&#1095;&#1072;&#1083;&#1086;</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
><A
HREF="dpsearch-track.ru.html"
ACCESSKEY="N"
>&#1057;&#1083;&#1077;&#1076;.</A
></TD
></TR
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
>Дизайн search.html</TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="dpsearch-doingsearch.ru.html"
ACCESSKEY="U"
>&#1059;&#1088;&#1086;&#1074;&#1077;&#1085;&#1100; &#1074;&#1099;&#1096;&#1077;</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
>Регистрация поисковых запросов
<A
NAME="AEN5500"
></A
></TD
></TR
></TABLE
></DIV
><!--#include virtual="body-after.html"--></BODY
></HTML
>